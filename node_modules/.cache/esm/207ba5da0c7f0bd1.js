_0c7‍.x([["QueryFilter",()=>QueryFilter]]);class QueryFilter {
    findInList = (rq) => {
        const { keyname, arraydata } = rq;
        let found = arraydata.find(x => x.key === keyname);
        if (arraydata.includes(found))
            return { success: true, found };
        else if (keyname.length > 0) {
            let flter = arraydata.map(x => x.id);
            let nextid = Math.max(...flter) + 1;
            arraydata.push({
                id: nextid,
                time: new Date(),
                key: keyname
            });
            return { success: true }
        }
        return { success: false }
    }

    searchInCodes = async (rq) => {
        try {
            const { country, zip, nbhood, city, dist } = rq;
            let query = "SELECT * FROM postalcode WHERE";
            let where = [];
            if (!(!(country))) where.push("countrycode LIKE '%" + country + "%'");
            if (!(!(zip))) where.push("\"postalcode\" = '" + zip + "'");
            if (!(!(nbhood))) where.push("mahalle LIKE '%" + nbhood + "%'");
            if (!(!(city))) where.push("city LIKE '%" + city + "%'");
            if (!(!(dist))) where.push("ilce LIKE '%" + dist + "%'");

            let ix = 0;
            where.forEach(w => {
                if (ix > 0) query += " AND";
                query += ' ' + w;
                ix++;
            });
            query += " LIMIT 10";
            const found = await db.query(query);
            if (found.rows.length > 0)
                return { success: true, data: found.rows };
            else
                return { success: false, data: "nothing found" };
        } catch (err) {
            return { success: false, data: err };
        }
    }
    //export {findInList, searchInCodes};
}
